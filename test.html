<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>students</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css"
    />
  </head>
  <body>
    <div class="buttons">
      <button class="button is-primary" onclick="studentsList()">Total</button>
      <button class="button is-link" onclick="adult()">Adult</button>
      <button class="button is-link" onclick="minor()">minor</button>
      <button class="button is-primary" onclick="search()">search</button>
    </div>
    <div>
      <input
        type="text"
        id="filterInput"
        placeholder="Filter by name, age, or major..."
        oninput="filterTable()"
        class="input is-primary"
      />
    </div>
    <table class="table is-bordered">
      <thead>
        <tr>
          <th onclick="sortByName()">Name</th>
          <th onclick="sortedAge()" ondblclick="reverseAge()">Age</th>
          <th>Gender</th>
          <th>Hobby</th>
          <th>Major</th>
          <th>Score</th>
          <th>Gmail</th>
          <th>School</th>
          <th>Last Login</th>
        </tr>
      </thead>
      <tbody id="studentsList"></tbody>
    </table>
    <script>
      const suragch = [
        {
          name: "Bat-Erdene Tömörbaatar",
          gender: "Male",
          hobby: "Horseback riding",
          gmail: "baterdene.tb@gmail.com",
          age: 23,
          major: "Mechanical Engineering",
          school: "Mongolian University of Science and Technology",
          lastLogin: 1752529354,
          score: [88, 76, 91, 85, 90],
        },
        {
          name: "Enkhjin Naranbaatar",
          gender: "Female",
          hobby: "Singing",
          gmail: "enkhjin.nb@gmail.com",
          age: 21,
          major: "Music",
          school: "Mongolian State University of Arts and Culture",
          lastLogin: 1752582861,
          score: [72, 81, 85, 77, 90],
        },
        {
          name: "Tsolmon Amgalan",
          gender: "Female",
          hobby: "Archery",
          gmail: "tsolmon.amgalan@gmail.com",
          age: 25,
          major: "History",
          school: "National University of Mongolia",
          lastLogin: 1752587567,
          score: [65, 78, 84, 69, 75],
        },
        {
          name: "Altan-Erdene Munkhbat",
          gender: "Male",
          hobby: "Photography",
          gmail: "altanerdene.mb@gmail.com",
          age: 22,
          major: "Journalism",
          school: "Mongolian University of Humanities",
          lastLogin: 1752551595,
          score: [90, 92, 88, 85, 94],
        },
        {
          name: "Solongo Erdenechimeg",
          gender: "Female",
          hobby: "Traveling",
          gmail: "solongo.ec@gmail.com",
          age: 24,
          major: "Tourism Management",
          school: "Mandakh University",
          lastLogin: 1752573780,
          score: [78, 80, 82, 79, 83],
        },
        {
          name: "Batzorig Namsrai",
          gender: "Male",
          hobby: "Fishing",
          gmail: "batzorig.ns@gmail.com",
          age: 26,
          major: "Environmental Science",
          school: "National University of Mongolia",
          lastLogin: 1752525950,
          score: [70, 68, 72, 74, 76],
        },
        {
          name: "Munkhzul Sukhbaatar",
          gender: "Female",
          hobby: "Poetry",
          gmail: "munkhzul.sb@gmail.com",
          age: 20,
          major: "Literature",
          school: "Mongolian National University of Education",
          lastLogin: 1752575675,
          score: [88, 91, 90, 87, 85],
        },
        {
          name: "Erdenebayar Ganbold",
          gender: "Male",
          hobby: "Gaming",
          gmail: "erdenebayar.gb@gmail.com",
          age: 23,
          major: "Computer Science",
          school: "Mongolian University of Science and Technology",
          lastLogin: 1752567678,
          score: [92, 93, 90, 89, 94],
        },
        {
          name: "Tungalag Enkhbayar",
          gender: "Female",
          hobby: "Cooking",
          gmail: "tungalag.eb@gmail.com",
          age: 22,
          major: "Hospitality Management",
          school: "Etugen University",
          lastLogin: 1752572291,
          score: [75, 80, 78, 74, 77],
        },
        {
          name: "Oyun-Erdene Delgermaa",
          gender: "Female",
          hobby: "Calligraphy",
          gmail: "oyunerdene.dm@gmail.com",
          age: 24,
          major: "Fine Arts",
          school: "Mongolian State University of Arts and Culture",
          lastLogin: 1752580021,
          score: [85, 87, 89, 90, 88],
        },
        {
          name: "Ganzorig Ariunbold",
          gender: "Male",
          hobby: "Camping",
          gmail: "ganzorig.ab@gmail.com",
          age: 25,
          major: "Forestry",
          school: "Mongolian State University of Agriculture",
          lastLogin: 1752557624,
          score: [68, 70, 72, 65, 69],
        },
        {
          name: "Uuganbayar Tsetsegmaa",
          gender: "Female",
          hobby: "Painting",
          gmail: "uuganbayar.tm@gmail.com",
          age: 22,
          major: "Visual Design",
          school: "School of Fine Arts",
          lastLogin: 1752571269,
          score: [84, 85, 88, 86, 87],
        },
        {
          name: "Nomin-Erdene Altangerel",
          gender: "Female",
          hobby: "Reading",
          gmail: "nominerdene.ag@gmail.com",
          age: 21,
          major: "Philosophy",
          school: "National University of Mongolia",
          lastLogin: 1752574533,
          score: [78, 80, 82, 79, 81],
        },
        {
          name: "Delgerbat Bilegt",
          gender: "Male",
          hobby: "Car tuning",
          gmail: "delgerbat.bl@gmail.com",
          age: 26,
          major: "Automotive Engineering",
          school: "Mongolian University of Science and Technology",
          lastLogin: 1752566537,
          score: [91, 92, 88, 90, 89],
        },
        {
          name: "Anudari Enkhbat",
          gender: "Female",
          hobby: "Dancing",
          gmail: "anudari.eb@gmail.com",
          age: 20,
          major: "Choreography",
          school: "Mongolian State University of Arts and Culture",
          lastLogin: 1752581405,
          score: [83, 85, 80, 84, 82],
        },
        {
          name: "Chinzorig Tumur",
          gender: "Male",
          hobby: "Boxing",
          gmail: "chinzorig.tm@gmail.com",
          age: 23,
          major: "Physical Education",
          school: "National Institute of Physical Education",
          lastLogin: 1752570412,
          score: [72, 74, 76, 70, 73],
        },
        {
          name: "Bolormaa Sainjargal",
          gender: "Female",
          hobby: "Sewing",
          gmail: "bolormaa.sj@gmail.com",
          age: 24,
          major: "Textile Design",
          school: "Etugen University",
          lastLogin: 1752556231,
          score: [78, 75, 80, 82, 77],
        },
        {
          name: "Otgonbayar Khulan",
          gender: "Female",
          hobby: "Yoga",
          gmail: "otgonbayar.kh@gmail.com",
          age: 25,
          major: "Health Sciences",
          school: "Ach Medical Institute",
          lastLogin: 1752575514,
          score: [85, 87, 83, 84, 82],
        },
        {
          name: "Sarnai Enkhchimeg",
          gender: "Female",
          hobby: "Knitting",
          gmail: "sarnai.ec@gmail.com",
          age: 23,
          major: "Home Economics",
          school: "Mongolian National University of Education",
          lastLogin: 1752529546,
          score: [79, 81, 77, 80, 78],
        },
        {
          name: "Temuulen Dorj",
          gender: "Male",
          hobby: "Basketball",
          gmail: "temuulen.dorj@gmail.com",
          age: 22,
          major: "Sports Management",
          school: "National Institute of Physical Education",
          lastLogin: 1752572035,
          score: [76, 78, 79, 77, 75],
        },
        {
          name: "Bayarmaa Odonchimeg",
          gender: "Female",
          hobby: "Birdwatching",
          gmail: "bayarmaa.oc@gmail.com",
          age: 26,
          major: "Zoology",
          school: "National University of Mongolia",
          lastLogin: 1752524938,
          score: [83, 85, 81, 82, 80],
        },
        {
          name: "Odgerel Ganbaatar",
          gender: "Female",
          hobby: "Chess",
          gmail: "odgerel.gb@gmail.com",
          age: 21,
          major: "Mathematics",
          school: "National University of Mongolia",
          lastLogin: 1752581133,
          score: [90, 92, 89, 91, 90],
        },
        {
          name: "Narantuya Erdenetsetseg",
          gender: "Female",
          hobby: "Writing",
          gmail: "narantuya.es@gmail.com",
          age: 22,
          major: "Journalism",
          school: "Mongolian University of Humanities",
          lastLogin: 1752579822,
          score: [77, 79, 78, 80, 76],
        },
        {
          name: "Dashdavaa Munkhbayar",
          gender: "Male",
          hobby: "Swimming",
          gmail: "dashdavaa.mb@gmail.com",
          age: 24,
          major: "Physical Education",
          school: "National Institute of Physical Education",
          lastLogin: 1752564510,
          score: [84, 85, 87, 83, 86],
        },
      ];

      const studentsList = () => renderTable(suragch);

      const adult = () => {
        const adults = suragch.filter((student) => student.age > 18);
        renderTable(adults);
      };
      const search = () => {
        let output = "";
        const query = prompt("Enter a name to search:");

        for (let i = 0; i < suragch.length; i++) {
          const {
            name,
            age,
            gender,
            hobby,
            major,
            gmail,
            school,
            lastLogin,
            score = [],
          } = suragch[i];

          const lowerName = name.toLowerCase();
          const lowerQuery = query.toLowerCase();

          if (lowerName.startsWith(lowerQuery)) {
            const totalScore = score.reduce((sum, s) => sum + s, 0);
            const averageScore =
              score.length > 0 ? Math.floor(totalScore / score.length) : "N/A";
            const lastLoginDate = lastLogin
              ? new Date(lastLogin * 1000).toLocaleString()
              : `<span style="opacity: 50%;">Not available</span>`;

            output += `
        <tr>
          <td>${name || `<span style="opacity: 50%;">Not available</span>`}</td>
          <td>${age || `<span style="opacity: 50%;">Not available</span>`}</td>
          <td>${
            gender || `<span style="opacity: 50%;">Not available</span>`
          }</td>
          <td>${
            hobby || `<span style="opacity: 50%;">Not available</span>`
          }</td>
          <td>${
            major || `<span style="opacity: 50%;">Not available</span>`
          }</td>
          <td>${averageScore}</td>
          <td>${
            gmail || `<span style="opacity: 50%;">Not available</span>`
          }</td>
          <td>${
            school || `<span style="opacity: 50%;">Not available</span>`
          }</td>
          <td>${lastLoginDate}</td>
        </tr>`;
          }
        }

        document.getElementById("studentsList").innerHTML =
          output || "<tr><td colspan='9'>No matching records found</td></tr>";
      };
      const minor = () => {
        const minors = suragch.filter((student) => student.age <= 18);
        renderTable(minors);
      };

      const sortByName = () => {
        const sortedStudents = [...suragch].sort((a, b) =>
          a.name.localeCompare(b.name)
        );
        renderTable(sortedStudents);
      };

      const sortedAge = () => {
        const sortedStudents = [...suragch].sort((a, b) => a.age - b.age);
        renderTable(sortedStudents);
      };

      const reverseAge = () => {
        const sortedStudents = [...suragch].sort((a, b) => b.age - a.age);
        renderTable(sortedStudents);
      };

      const filterTable = () => {
        const filterValue = document
          .getElementById("filterInput")
          .value.toLowerCase();
        const filteredStudents = suragch.filter(
          ({ name, age, major, school }) => {
            return (
              name.toLowerCase().includes(filterValue) ||
              age.toString().includes(filterValue) ||
              major.toLowerCase().includes(filterValue) ||
              school.toLowerCase().includes(filterValue)
            );
          }
        );
        renderTable(filteredStudents);
      };

      const renderTable = (students) => {
        let output = "";

        for (const {
          name,
          age,
          gender,
          hobby,
          major,
          gmail,
          school,
          lastLogin,
          score = [],
        } of students) {
          const totalScore = score.reduce((sum, s) => sum + s, 0);
          const averageScore =
            score.length > 0 ? Math.floor(totalScore / score.length) : "N/A";
          const lastLoginDate = lastLogin
            ? new Date(lastLogin * 1000).toLocaleString()
            : `<span style="opacity: 50%;">Not available</span>`;

          output += `
      <tr>
        <td>${name || `<span style="opacity: 50%;">Not available</span>`}</td>
        <td>${age || `<span style="opacity: 50%;">Not available</span>`}</td>
        <td>${gender || `<span style="opacity: 50%;">Not available</span>`}</td>
        <td>${hobby || `<span style="opacity: 50%;">Not available</span>`}</td>
        <td>${major || `<span style="opacity: 50%;">Not available</span>`}</td>
        <td>${averageScore}</td>
        <td>${gmail || `<span style="opacity: 50%;">Not available</span>`}</td>
        <td>${school || `<span style="opacity: 50%;">Not available</span>`}</td>
        <td>${lastLoginDate}</td>
      </tr>`;
        }

        document.getElementById("studentsList").innerHTML =
          output || "<tr><td colspan='9'>No matching records found</td></tr>";
      };
    </script>
  </body>
</html>
