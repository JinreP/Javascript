<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Snake Game</title>
    <style>
      .board {
        width: 600px;
        height: 600px;
        background-color: black;
        margin: 100px auto;
        border: solid 4px white;
        border-radius: 20px;
        position: relative;
      }
      .tails {
        width: 30px;
        height: 30px;
        background-color: green;
        position: absolute;
        border-radius: 5px;
      }
      #snakeHead {
        width: 30px;
        height: 30px;
        background-color: green;
        position: absolute;
        background-image: url("images/pngtree-cartoon-green-snake-head-free-buckle-illustration-png-image_4721641.jpg");
        background-size: contain;
        background-repeat: no-repeat;
      }
      .food {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background-size: cover;
        background-color: transparent;
        background-image: url("images/pngtree-summer-cartoon-fruit-apple-png-download-apple-snake-fruit-red-apple-png-image_3939961.jpg");
        position: absolute;
      }
    </style>
  </head>
  <body>
    <div class="gameContainer">
      <div id="gameBoard" class="board">
        <div id="food" class="food"></div>
      </div>
      <div class="score"></div>
    </div>
    <script>
      const unit = 30;
      const board = {
        height: 20,
        width: 20,
      };
      let food = { x: 10, y: 10 };
      let score = 0;
      const foodElement = document.getElementById("food");
      let tails = [
        { x: 2, y: 5 },
        { x: 3, y: 5 },
        { x: 4, y: 5 },
      ];

      let headX = 4;
      let headY = 5;
      let direction = "left";
      function reset() {
        tails = [
          { x: 2, y: 5 },
          { x: 3, y: 5 },
          { x: 4, y: 5 },
        ];

        headX = 4;
        headY = 5;
        direction = "left";
      }
      let boardWidth = board.width * unit;
      let boardHeight = board.height * unit;

      function init() {
        boardWidth = board.width * unit;
        boardHeight = board.height * unit;
        document.getElementById("gameBoard").style.width = `${boardWidth}px`;
        document.getElementById("gameBoard").style.height = `${boardHeight}px`;
        foodElement.style.height = `${unit}px`;
        foodElement.style.width = `${unit}px`;
        foodElement.style.left = `${food.x * unit}px`;
        foodElement.style.top = `${food.y * unit}px`;
      }
      init();

      function changeDirection(newDirection) {
        if (
          (direction === "left" && newDirection === "right") ||
          (direction === "right" && newDirection === "left") ||
          (direction === "up" && newDirection === "down") ||
          (direction === "down" && newDirection === "up")
        ) {
          return;
        }
        direction = newDirection;
      }

      function goRight() {
        headX = headX + 1;
        if (headX >= board.width) {
          headX = 0;
        }
      }

      function goLeft() {
        headX = headX - 1;
        if (headX < 0) {
          headX = board.width - 1;
        }
      }

      function goTop() {
        headY = headY - 1;
        if (headY < 0) {
          headY = board.height - 1;
        }
      }

      function goBottom() {
        headY = headY + 1;
        if (headY >= board.height) {
          headY = 0;
        }
      }

      function render() {
        const gameBoard = document.getElementById("gameBoard");

        gameBoard
          .querySelectorAll(".tails, #snakeHead")
          .forEach((el) => el.remove());

        const snakeHead = document.createElement("div");
        snakeHead.id = "snakeHead";
        snakeHead.style.width = `${unit}px`;
        snakeHead.style.height = `${unit}px`;
        snakeHead.style.left = `${headX * unit}px`;
        snakeHead.style.top = `${headY * unit}px`;
        snakeHead.style.position = "absolute";
        snakeHead.style.backgroundColor = "green";
        gameBoard.appendChild(snakeHead);

        tails.forEach((tail) => {
          const tailElement = document.createElement("div");
          tailElement.classList.add("tails");
          tailElement.style.width = `${unit}px`;
          tailElement.style.height = `${unit}px`;
          tailElement.style.left = `${tail.x * unit}px`;
          tailElement.style.top = `${tail.y * unit}px`;
          tailElement.style.position = "absolute";
          tailElement.style.backgroundColor = "green";
          gameBoard.appendChild(tailElement);
        });

        foodElement.style.left = `${food.x * unit}px`;
        foodElement.style.top = `${food.y * unit}px`;
      }

      function generateFood() {
        food.x = Math.floor(Math.random() * board.width);
        food.y = Math.floor(Math.random() * board.height);
      }

      function checkFoodCollision() {
        if (headX === food.x && headY === food.y) {
          generateFood();
          growSnake();
        }
      }

      function growSnake() {
        const lastTail = tails[tails.length - 1];
        tails.push({ x: lastTail.x, y: lastTail.y });
      }
      clearInterval;
      setInterval(() => {
        if (direction === "right") {
          goRight();
        } else if (direction === "left") {
          goLeft();
        } else if (direction === "up") {
          goTop();
        } else if (direction === "down") {
          goBottom();
        }
        for (let i = 0; i < tails.length - 1; i++) {
          if (headX === tails[i].x && headY === tails[i].y) {
            alert("game over");
          }
        }

        checkFoodCollision();
        tails.push({ x: headX, y: headY });
        tails.shift();
        render();
      }, 100);

      addEventListener("keydown", (event) => {
        if (event.key === "ArrowDown") {
          changeDirection("down");
        } else if (event.key === "ArrowUp") {
          changeDirection("up");
        } else if (event.key === "ArrowLeft") {
          changeDirection("left");
        } else if (event.key === "ArrowRight") {
          changeDirection("right");
        }
      });
    </script>
  </body>
</html>
